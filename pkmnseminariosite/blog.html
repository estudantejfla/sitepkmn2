<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <title>Blog - Criar Time Pokémon</title>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css">

</head>
<body>
  
  <video autoplay muted loop id="bg-video" class="background-video">
    <source src="imagens/background.mp4" type="video/mp4">
  </video>

  <div class="container">
    
  <div class="navbar">
    <a href="index.html">Início</a>
    <a href="blog.html">Blog</a>
    <a href="postar.html">Nova Postagem</a>
    <a href="times.html">Meus Times</a>
    <a href="criar_time.html">Criar Time</a>
    <a href="publicos.html">Times Públicos</a>
    <a href="cadastro.html">Tipos</a>
    <a href="faq.html">FAQ</a>
    <a href="depoimentos.html">Depoimentos</a>
    <a href="sobre.html">Sobre</a>
  </div>

  <h1>Blog / Notícias</h1>
  <div class="card">
    <h3>Teste</h3>
    <p class="muted">Publicado</p>
    <p>teste texto caixa</p>
  </div>
  <h2>Postagens da Comunidade</h2>
  <div id="userPosts" class="grid"></div>
  <script src="frontend-api.js"></script>
<script>
(async function(){
  const res = await apiFetch("/posts");
  const el = document.getElementById('userPosts');
  el.innerHTML = "";
  if (!res.ok) {
    el.innerHTML = '<p class="muted">Erro ao carregar postagens.</p>';
    return;
  }
  const posts = res.data || [];
  if (!posts.length) {
    el.innerHTML = '<p class="muted">Sem postagens ainda. <a href="postar.html">Crie a primeira!</a></p>';
    return;
  }
  posts.forEach(p=>{
    const card = document.createElement('div');
    card.className = 'card';
    const date = p.createdAt ? new Date(p.createdAt).toLocaleDateString() : '';
    card.innerHTML = `<h3>${p.title}</h3><p class="muted">Publicado em ${date}</p><p>${p.content}</p><p class="muted">Por: ${p.author?.username || "Desconhecido"}</p>`;
    el.appendChild(card);
  });
})();
</script>

