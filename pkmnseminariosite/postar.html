<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nova Postagem - Blog</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <video autoplay muted loop id="bg-video" class="background-video">
    <source src="imagens/background.mp4" type="video/mp4">
  </video>
  <div class="container">
    <div class="navbar">
    <a href="index.html">Início</a>
    <a href="blog.html">Blog</a>
    <a href="postar.html">Nova Postagem</a>
    <a href="times.html">Meus Times</a>
    <a href="criar_time.html">Criar Time</a>
    <a href="publicos.html">Times Públicos</a>
    <a href="cadastro.html">Tipos</a>
    <a href="faq.html">FAQ</a>
    <a href="depoimentos.html">Depoimentos</a>
    <a href="sobre.html">Sobre</a>
  </div>
    <h1>Criar Nova Postagem</h1>
    <div class="box">
      <label>Título</label>
      <input id="postTitle" placeholder="Título da postagem" />
      <label>Conteúdo</label>
      <textarea id="postBody" rows="8" placeholder="Escreva aqui..."></textarea>
      <button class="btn" onclick="salvarPost()">Publicar</button>
      <a class="btn secondary" href="blog.html">Cancelar</a>
    </div>
  </div>
  <script>

    let user = localStorage.getItem("logado");
    let contas = JSON.parse(localStorage.getItem("contas")) || {};
    if (!user || !contas[user]) {
      alert("Você precisa estar logado para postar no blog");
      window.location.href = "index.html";
    }

    function salvarPost() {
      const t = document.getElementById('postTitle').value.trim();
      const b = document.getElementById('postBody').value.trim();
      if(!t || !b) return alert('Preencha título e conteúdo');
      const posts = JSON.parse(localStorage.getItem('blog_posts')||'[]');
      posts.unshift({ id: Date.now(), title: t, body: b, date: new Date().toISOString().slice(0,10) });
      localStorage.setItem('blog_posts', JSON.stringify(posts));
      location.href = 'blog.html';
    }
  </script>
  <script src="script.js"></script>
</body>
</html>
